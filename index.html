<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel NeoBox</title>
  <style>
    body { font-family: Arial; background: #121212; color: #fff; padding: 20px; }
    .ok { color: #4cff77; }
    .offline { color: #ff4c4c; }
    .card { background: #1e1e1e; padding: 15px; margin-bottom: 20px; border-radius: 10px; }
    input, button { padding: 10px; margin-top: 10px; width: 100%; border-radius: 5px; border: none; }
    button { background: #4cff77; color: #000; cursor: pointer; }
  </style>
</head>
<body>
  <h1>üìä Panel NeoBox</h1>

  <div class="card">
    <h2>üåç Estado del servidor</h2>
    <p id="serverStatus">Cargando...</p>
    <p id="players"></p>
  </div>

  <div class="card">
    <h2>‚å®Ô∏è Consola</h2>
    <input id="commandInput" placeholder="Escribe un comando...">
    <button onclick="sendCommand()">Enviar</button>
    <pre id="consoleOutput"></pre>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    const statusP = document.getElementById("serverStatus");
    const playersP = document.getElementById("players");
    const output = document.getElementById("consoleOutput");

    socket.on("serverStatus", (data) => {
      if(data.online) {
        statusP.innerHTML = `‚úÖ Online | Versi√≥n: ${data.version} | MOTD: ${data.motd}`;
        playersP.innerHTML = `üë• Jugadores: ${data.onlinePlayers}/${data.maxPlayers}<br>` +
                             (data.players.length ? `üîπ ${data.players.map(p => p.name).join(", ")}` : "Nadie conectado");
      } else {
        statusP.innerHTML = `<span class="offline">‚ùå Servidor apagado o no accesible</span>`;
        playersP.innerHTML = "";
      }
    });

    socket.on("commandResponse", (res) => {
      output.textContent += res + "\n";
    });

    function sendCommand() {
      const cmd = document.getElementById("commandInput").value;
      socket.emit("sendCommand", cmd);
      document.getElementById("commandInput").value = "";
    }
  </script>
</body>
</html>
